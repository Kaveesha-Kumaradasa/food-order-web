import{C as x,D as u,E as m,F as j,G as ce,H as s,I as h,J as _,K as se,L as me,M as le,N as B,O as C,P as N,Q as M,R as z,S as D,T,U as pe,V as E,W as V,a as q,aa as R,b as X,c as te,ca as ee,d as ne,e as ie,ea as de,f as O,fa as H,g as oe,ga as ge,ha as ue,j as I,k as P,ka as fe,l as b,m as re,ma as _e,n as d,na as Ce,o as g,p as w,q as c,r as A,s as S,sa as U,t as k,ta as xe,u as f,v as Z,w as p,x as r,y as a,z as ae}from"./chunk-WYDC7NTN.js";var L=class i{constructor(t){this.api=t}getCategories(){let t="/api/v1/webshop/categories/webshop-brand/1/shop/2";return console.log("categories GET ",t),this.api.get(t,"pos")}getMainMenuCategories(){let t="/api/v1/webshop/main-menu/65/categories/webshop-brand/1/shop/2";return console.log("main-menu categories GET ",t),this.api.get(t,"pos")}static \u0275fac=function(e){return new(e||i)(b(de))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var F=class i{constructor(t,e){this.auth=t;this.router=e;this.auth.currentUser.subscribe(()=>{this._state$.next(this.load())})}_state$=new ne({items:[]});state$=this._state$.asObservable();items$=this.state$.pipe(O(t=>t.items));count$=this.items$.pipe(O(t=>t.reduce((e,n)=>e+n.qty,0)));total$=this.items$.pipe(O(t=>t.reduce((e,n)=>e+n.lineTotal,0)));getStorageKey(){return`foodapp.cart.v1.${this.auth.currentUserValue?.id||"guest"}`}add(t,e=1){if(!this.auth.currentUserValue?.id){alert("Please log in to add items to your cart."),this.router.navigate(["/auth/login"]);return}if(!t?.id)return;let n=this.clone(),o=n.items.findIndex(l=>String(l.id)===String(t.id));o>=0?(n.items[o].qty+=e,n.items[o].lineTotal=n.items[o].qty*n.items[o].price):n.items.unshift(X(q({},t),{qty:e,lineTotal:(t.price??0)*e})),this.commit(n)}setQty(t,e){let n=this.clone(),o=n.items.find(l=>String(l.id)===String(t));o&&(o.qty=Math.max(1,Math.floor(e||1)),o.lineTotal=o.qty*o.price,this.commit(n))}increase(t){let e=this.clone(),n=e.items.find(o=>String(o.id)===String(t));n&&(n.qty+=1,n.lineTotal=n.qty*n.price,this.commit(e))}decrease(t){let e=this.clone(),n=e.items.find(o=>String(o.id)===String(t));n&&(n.qty=Math.max(1,n.qty-1),n.lineTotal=n.qty*n.price,this.commit(e))}remove(t){let e=this.clone();e.items=e.items.filter(n=>String(n.id)!==String(t)),this.commit(e)}clear(){this.commit({items:[]})}clone(){return{items:this._state$.value.items.map(e=>q({},e))}}commit(t){this._state$.next(t),this.save(t)}load(){try{let t=localStorage.getItem(this.getStorageKey());if(!t)return{items:[]};let e=JSON.parse(t);return e.items=(e.items??[]).map(n=>X(q({},n),{qty:Math.max(1,Math.floor(n.qty||1)),lineTotal:(n.price??0)*Math.max(1,Math.floor(n.qty||1))})),e}catch{return{items:[]}}}save(t){try{localStorage.setItem(this.getStorageKey(),JSON.stringify(t))}catch{}}static \u0275fac=function(e){return new(e||i)(b(H),b(R))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};function Se(i,t){if(i&1){let e=x();r(0,"div"),ae(1,"img",5),r(2,"h2",6),s(3),a(),r(4,"p",7),s(5),C(6,"number"),a(),r(7,"p",8),s(8),a(),r(9,"div",9)(10,"label",10),s(11," Qty: "),r(12,"input",11),le("ngModelChange",function(o){d(e);let l=m(2);return me(l.qty,o)||(l.qty=o),g(o)}),a()(),r(13,"button",12),u("click",function(){d(e);let o=m(2);return g(o.addToCart())}),s(14),a()()()}if(i&2){let e=t.ngIf,n=m(2);c(),p("alt",B(e.name))("src",e.image||"https://via.placeholder.com/300x200",w),c(2),h(e.name),c(2),_("$",M(6,8,e.price,"1.2-2")),c(3),h(e.description),c(4),se("ngModel",n.qty),c(2),_("Add ",n.qty," to Cart")}}function ke(i,t){if(i&1){let e=x();r(0,"div",1),u("click",function(){d(e);let o=m();return g(o.onClose())}),r(1,"div",2),u("click",function(o){return d(e),g(o.stopPropagation())}),r(2,"button",3),u("click",function(){d(e);let o=m();return g(o.onClose())}),s(3,"\xD7"),a(),f(4,Se,15,11,"div",4),a()()}if(i&2){let e=m();c(4),p("ngIf",e.item)}}var K=class i{constructor(t){this.cart=t}item=null;visible=!1;close=new Z;add=new Z;qty=1;addToCart(){this.item&&(this.cart.add({id:this.item.id,name:this.item.name,price:this.item.price,image:this.item.image,description:this.item.description,categoryId:this.item.categoryId},this.qty),this.add.emit({item:this.item,qty:this.qty}),this.onClose())}onClose(){this.close.emit(),this.qty=1}static \u0275fac=function(e){return new(e||i)(A(F))};static \u0275cmp=S({type:i,selectors:[["app-menu-item"]],inputs:{item:"item",visible:"visible"},outputs:{close:"close",add:"add"},standalone:!1,decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"close-btn",3,"click"],[4,"ngIf"],[1,"modal-image",3,"src","alt"],[1,"modal-title"],[1,"modal-price"],[1,"modal-desc"],[1,"modal-actions"],[1,"qty-label"],["type","number","min","1",3,"ngModelChange","ngModel"],[3,"click"]],template:function(e,n){e&1&&f(0,ke,5,1,"div",0),e&2&&p("ngIf",n.visible)},dependencies:[T,ge,_e,ue,Ce,fe,E],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:50}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;width:90%;max-width:500px;position:relative}.modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;font-size:24px;border:none;background:none;cursor:pointer;color:#9ca3af}.modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#374151}.modal-content[_ngcontent-%COMP%]   .modal-image[_ngcontent-%COMP%]{width:100%;height:220px;object-fit:cover;border-radius:4px;margin-bottom:16px}.modal-content[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin-bottom:4px}.modal-content[_ngcontent-%COMP%]   .modal-price[_ngcontent-%COMP%]{font-size:19px;font-weight:700;color:#4f46e5;margin-bottom:12px}.modal-content[_ngcontent-%COMP%]   .modal-desc[_ngcontent-%COMP%]{font-size:15px;color:#6b7280;margin-bottom:16px}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{margin-top:12px;display:flex;align-items:center;gap:12px}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;padding:6px}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:none;padding:12px 24px;border-radius:9999px;font-weight:600;cursor:pointer}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#4338ca}"]})};function Ee(i,t){i&1&&(r(0,"div",9)(1,"p"),s(2,"Loading delicious menu items..."),a()())}function Ve(i,t){if(i&1){let e=x();r(0,"button",14),u("click",function(){let o=d(e).$implicit,l=m(2);return g(l.selectCategory(o))}),s(1),a()}if(i&2){let e=t.$implicit,n=m(2);ce("active",(n.selectedCategory==null?null:n.selectedCategory.id)===e.id),c(),_(" ",e.name||"Unknown Category"," ")}}function Fe(i,t){if(i&1&&(r(0,"section",10)(1,"h2",11),s(2,"Menu Categories"),a(),r(3,"div",12),f(4,Ve,2,3,"button",13),a()()),i&2){let e=m();c(4),p("ngForOf",e.menuCategories)("ngForTrackBy",e.trackByCategory)}}function je(i,t){if(i&1){let e=x();r(0,"div",19),u("click",function(){let o=d(e).$implicit,l=m(3);return g(l.openMenuModal(o))}),r(1,"img",20),u("error",function(o){let l=d(e).$implicit,y=m(3);return g(y.onImageError(o,l))}),a(),r(2,"div",21)(3,"h3",22),s(4),a(),r(5,"p",23),s(6),C(7,"number"),a(),r(8,"p",24),s(9),a()()()}if(i&2){let e=t.$implicit,n=m(3);c(),p("src",e.image||n.getDefaultImage(),w)("alt",e.name||"Food item"),c(3),h(e.name||"Unknown Item"),c(2),_("$",M(7,5,e.price||0,"1.2-2")),c(3),h(e.description||"Delicious food item")}}function $e(i,t){if(i&1&&(r(0,"div",17),f(1,je,10,8,"div",18),a()),i&2){let e=m(2);c(),p("ngForOf",e.filteredMenuItems)("ngForTrackBy",e.trackByItem)}}function qe(i,t){if(i&1){let e=x();r(0,"div",25)(1,"p"),s(2,"No items available for this category"),a(),r(3,"button",26),u("click",function(){d(e);let o=m(2);return g(o.fetchMenu())}),s(4,"Refresh Menu"),a()()}}function Ae(i,t){if(i&1&&(r(0,"section",15)(1,"h2",11),s(2),a(),f(3,$e,2,2,"div",16)(4,qe,5,0,"ng-template",null,0,z),a()),i&2){let e=j(5),n=m();c(2),_("",n.selectedCategory.name||"Menu"," Menu"),c(),p("ngIf",n.filteredMenuItems.length>0)("ngIfElse",e)}}var Q=class i{constructor(t){this.pos=t}loadingCategories=!1;loadingItems=!1;error="";menuCategories=[];selectedCategory=null;filteredMenuItems=[];showModal=!1;selectedMenuItem=null;subs=new te;itemsByCategory=new Map;trackByCategory=(t,e)=>e?.id;trackByItem=(t,e)=>e?.id;ngOnInit(){this.fetchMenu()}ngOnDestroy(){this.subs.unsubscribe()}fetchMenu(){this.loadingCategories=!0,this.loadingItems=!0,this.error="",this.subs.add(this.pos.getMainMenuCategories().pipe(O(t=>(console.log("[API]",t),this.buildMenuView(t))),oe(t=>(console.error("[API error]",t),this.error="Failed to load menu.",ie({categories:[],itemsByCategory:new Map})))).subscribe(({categories:t,itemsByCategory:e})=>{this.menuCategories=t,this.itemsByCategory=e;let n=this.menuCategories.find(o=>(this.itemsByCategory.get(o.id)?.length??0)>0);this.selectedCategory=n??this.menuCategories[0]??null,this.applyFilter(),this.loadingCategories=!1,this.loadingItems=!1,this.menuCategories.length||(this.error="No categories/items returned by the endpoint.")}))}buildMenuView(t){let e=[],n=new Map,o=t?.data??{};if(o&&typeof o=="object"&&!Array.isArray(o))for(let[l,y]of Object.entries(o)){let J=this.slug(l),ve=Array.isArray(y)?y.map(ye=>this.toMenuItem(ye,J)):[];e.push({id:J,name:l}),n.set(J,ve)}return{categories:e,itemsByCategory:n}}toMenuItem(t,e){let n=t?.price??t?.cost??0,o=typeof n=="string"?parseFloat(n):Number(n);return{id:String(t?.id??t?.itemId??t?._id??Be()),name:String(t?.name??t?.title??"Item"),description:String(t?.description??t?.desc??""),price:Number.isFinite(o)?o:0,image:t?.image??t?.image_url??t?.photo??"",categoryId:e??null}}selectCategory(t){this.selectedCategory=t,this.applyFilter()}applyFilter(){if(!this.selectedCategory){this.filteredMenuItems=[];return}this.filteredMenuItems=[...this.itemsByCategory.get(this.selectedCategory.id)??[]]}openMenuModal(t){this.selectedMenuItem=t,this.showModal=!0}closeMenuModal(){this.showModal=!1,this.selectedMenuItem=null}addToCart(t){console.log("Added from modal:",t.item,"x",t.qty),this.closeMenuModal()}getDefaultImage(){return"https://www.precisionorthomd.com/wp-content/uploads/2023/10/percision-blog-header-junk-food-102323.jpg"}onImageError(t,e){let n=t.target;n.src.includes("placeholder.com")||(n.onerror=null,n.src=this.getDefaultImage())}slug(t){return String(t??"").trim().toLowerCase().replace(/\s+/g,"-")}static \u0275fac=function(e){return new(e||i)(A(L))};static \u0275cmp=S({type:i,selectors:[["app-homepage"]],standalone:!1,decls:10,vars:5,consts:[["noItems",""],[1,"homepage-container"],[1,"shop-header"],[1,"shop-name"],[1,"shop-description"],["class","loading-container",4,"ngIf"],["class","menu-categories",4,"ngIf"],["class","menu-items",4,"ngIf"],[3,"close","add","item","visible"],[1,"loading-container"],[1,"menu-categories"],[1,"section-title"],[1,"categories-scroll"],["class","category-btn",3,"active","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"category-btn",3,"click"],[1,"menu-items"],["class","items-grid",4,"ngIf","ngIfElse"],[1,"items-grid"],["class","menu-item-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"menu-item-card",3,"click"],[1,"item-image",3,"error","src","alt"],[1,"item-details"],[1,"item-name"],[1,"item-price"],[1,"item-desc"],[1,"no-items-message"],[1,"retry-btn",3,"click"]],template:function(e,n){e&1&&(r(0,"div",1)(1,"header",2)(2,"h1",3),s(3,"Delicious Bites Restaurant"),a(),r(4,"p",4),s(5,"Your favorite food delivery spot"),a()(),f(6,Ee,3,0,"div",5)(7,Fe,5,2,"section",6)(8,Ae,6,3,"section",7),r(9,"app-menu-item",8),u("close",function(){return n.closeMenuModal()})("add",function(l){return n.addToCart(l)}),a()()),e&2&&(c(6),p("ngIf",n.loadingCategories||n.loadingItems),c(),p("ngIf",!n.loadingCategories),c(),p("ngIf",n.selectedCategory&&!n.loadingItems),c(),p("item",n.selectedMenuItem)("visible",n.showModal))},dependencies:[D,T,K,E],styles:[".homepage-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:60px}.shop-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(to right,#facc15,#4ade80);color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a}.shop-header[_ngcontent-%COMP%]   .shop-name[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:4px}.shop-header[_ngcontent-%COMP%]   .shop-description[_ngcontent-%COMP%]{font-size:16px;opacity:.9}.menu-categories[_ngcontent-%COMP%]{margin-bottom:20px}.menu-categories[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:12px;color:#111827}.menu-categories[_ngcontent-%COMP%]   .categories-scroll[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#fff;border:1px solid #e5e7eb;border-radius:8px;padding:6px;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;scrollbar-width:thin;scrollbar-color:#cfcfcf transparent}.menu-categories[_ngcontent-%COMP%]   .categories-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.menu-categories[_ngcontent-%COMP%]   .categories-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cfcfcf;border-radius:3px}.menu-categories[_ngcontent-%COMP%]   .category-btn[_ngcontent-%COMP%]{padding:7px 14px;border:1px solid transparent;border-radius:6px;background:transparent;color:#111827;font-weight:600;font-size:15px;white-space:nowrap;cursor:pointer;transition:background .16s ease,color .16s ease}.menu-categories[_ngcontent-%COMP%]   .category-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6}.menu-categories[_ngcontent-%COMP%]   .category-btn.active[_ngcontent-%COMP%]{background:#facc15;color:#111827;border-color:#facc15;font-weight:700}.menu-items[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:19px;font-weight:600;margin-bottom:16px}.menu-items[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px}.menu-items[_ngcontent-%COMP%]   .menu-item-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #f3f4f6;border-radius:8px;overflow:hidden;cursor:pointer;transition:transform .2s,box-shadow .2s}.menu-items[_ngcontent-%COMP%]   .menu-item-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 12px #0000001a}.menu-items[_ngcontent-%COMP%]   .menu-item-card[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover;background:#f3f4f6}.menu-items[_ngcontent-%COMP%]   .menu-item-card[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{padding:16px}.menu-items[_ngcontent-%COMP%]   .menu-item-card[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:4px}.menu-items[_ngcontent-%COMP%]   .menu-item-card[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#4f46e5;margin-bottom:4px}.menu-items[_ngcontent-%COMP%]   .menu-item-card[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{font-size:14px;color:#6b7280}.loading-container[_ngcontent-%COMP%], .no-items-message[_ngcontent-%COMP%]{text-align:center;padding:32px;color:#6b7280}.loading-container[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%], .no-items-message[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]{margin-top:16px;background:#4f46e5;color:#fff;border:none;padding:10px 19px;border-radius:9999px;cursor:pointer;font-weight:500}.loading-container[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:hover, .no-items-message[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:hover{background:#4338ca}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:50}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;width:90%;max-width:500px;position:relative}.modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;font-size:24px;border:none;background:none;cursor:pointer;color:#9ca3af}.modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#374151}.modal-content[_ngcontent-%COMP%]   .modal-image[_ngcontent-%COMP%]{width:100%;height:220px;object-fit:cover;border-radius:4px;margin-bottom:16px}.modal-content[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin-bottom:4px}.modal-content[_ngcontent-%COMP%]   .modal-price[_ngcontent-%COMP%]{font-size:19px;font-weight:700;color:#4f46e5;margin-bottom:12px}.modal-content[_ngcontent-%COMP%]   .modal-desc[_ngcontent-%COMP%]{font-size:15px;color:#6b7280;margin-bottom:16px}.modal-content[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:none;padding:12px 24px;border-radius:9999px;font-weight:600;cursor:pointer}.modal-content[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]:hover{background:#4338ca}"]})};function Be(){return"id_"+Math.random().toString(36).slice(2)}function Ne(i,t){if(i&1){let e=x();r(0,"div",7)(1,"div",8)(2,"img",9),u("error",function(o){d(e);let l=m(3);return g(l.onImageError(o))}),a(),r(3,"div",10)(4,"div",11),s(5),a(),r(6,"div",12),s(7),C(8,"number"),a()()(),r(9,"div",13)(10,"div",14)(11,"button",15),u("click",function(){let o=d(e).$implicit,l=m(3);return g(l.decrease(o.id))}),s(12,"\u2212"),a(),r(13,"input",16),u("change",function(o){let l=d(e).$implicit,y=m(3);return g(y.updateQty(l.id,o.target.value))}),a(),r(14,"button",17),u("click",function(){let o=d(e).$implicit,l=m(3);return g(l.increase(o.id))}),s(15,"+"),a()(),r(16,"div",18),s(17),C(18,"number"),a(),r(19,"button",19),u("click",function(){let o=d(e).$implicit,l=m(3);return g(l.remove(o.id))}),s(20,"Remove"),a()()()}if(i&2){let e=t.$implicit,n=m(3);c(2),p("alt",B(e.name))("src",e.image||n.fallbackImage,w),c(3),h(e.name),c(2),_("LKR ",M(8,7,e.price,"1.2-2")),c(6),p("value",e.qty),c(4),_("LKR ",M(18,10,e.lineTotal,"1.2-2"))}}function ze(i,t){if(i&1&&(r(0,"div",5),f(1,Ne,21,13,"div",6),a()),i&2){let e=m().ngIf,n=m();c(),p("ngForOf",e)("ngForTrackBy",n.trackById)}}function De(i,t){if(i&1){let e=x();r(0,"div",20)(1,"div",21)(2,"span"),s(3,"Items"),a(),r(4,"strong"),s(5),C(6,"async"),a()(),r(7,"div",22)(8,"span"),s(9,"Total"),a(),r(10,"strong"),s(11),C(12,"async"),C(13,"number"),a()(),r(14,"div",23)(15,"button",24),u("click",function(){d(e);let o=m(2);return g(o.clear())}),s(16,"Clear Cart"),a()()()}if(i&2){let e=m(2);c(5),h(N(6,2,e.count$)||0),c(6),_("LKR ",M(13,6,N(12,4,e.total$)||0,"1.2-2"))}}function Re(i,t){if(i&1&&(r(0,"div",2)(1,"h2"),s(2,"Your Cart"),a(),f(3,ze,2,2,"div",3)(4,De,17,9,"div",4),a()),i&2){let e=t.ngIf;m();let n=j(3);c(3),p("ngIf",e.length>0)("ngIfElse",n),c(),p("ngIf",e.length>0)}}function He(i,t){i&1&&(r(0,"div",2)(1,"p"),s(2,"Your cart is empty!"),a()())}var W=class i{cart=re(F);items$=this.cart.items$;total$=this.cart.total$;count$=this.cart.count$;fallbackImage="https://www.precisionorthomd.com/wp-content/uploads/2023/10/percision-blog-header-junk-food-102323.jpg";trackById=(t,e)=>e.id;increase(t){this.cart.increase(t)}decrease(t){this.cart.decrease(t)}updateQty(t,e){let n=Number(e);!Number.isFinite(n)||n<1||this.cart.setQty(t,n)}remove(t){this.cart.remove(t)}clear(){this.cart.clear()}onImageError(t){let e=t.target;e.src.includes("placeholder.com")||(e.onerror=null,e.src=this.fallbackImage)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-cart"]],standalone:!1,decls:4,vars:4,consts:[["emptyCart",""],["class","cart-container",4,"ngIf","ngIfElse"],[1,"cart-container"],["class","cart-items",4,"ngIf","ngIfElse"],["class","cart-summary",4,"ngIf"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cart-item"],[1,"left"],[3,"error","src","alt"],[1,"meta"],[1,"name"],[1,"price"],[1,"right"],[1,"qty"],["aria-label","Decrease",3,"click"],["type","number","min","1",3,"change","value"],["aria-label","Increase",3,"click"],[1,"line-total"],[1,"remove",3,"click"],[1,"cart-summary"],[1,"row"],[1,"row","total"],[1,"actions"],[1,"clear",3,"click"]],template:function(e,n){if(e&1&&(f(0,Re,5,3,"div",1),C(1,"async"),f(2,He,3,0,"ng-template",null,0,z)),e&2){let o=j(3);p("ngIf",N(1,2,n.items$))("ngIfElse",o)}},dependencies:[D,T,pe,E],styles:[".cart-container[_ngcontent-%COMP%]{padding:60px;max-width:900px;margin:0 auto}.cart-items[_ngcontent-%COMP%]{margin:16px 0;display:grid;gap:12px}.cart-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;padding:12px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;gap:12px}.left[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px;object-fit:cover;border-radius:10px;border:1px solid #eee}.meta[_ngcontent-%COMP%]{display:grid;gap:6px}.name[_ngcontent-%COMP%]{font-weight:600}.price[_ngcontent-%COMP%]{font-size:14px;color:#374151}.right[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.qty[_ngcontent-%COMP%]{display:inline-flex;border:1px solid #e5e7eb;border-radius:10px;overflow:hidden}.qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;background:#f9fafb;border:0;cursor:pointer}.qty[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:56px;text-align:center;border:0;outline:none}.line-total[_ngcontent-%COMP%]{width:140px;text-align:right;font-weight:600}.remove[_ngcontent-%COMP%]{background:transparent;border:1px solid #ef4444;color:#ef4444;border-radius:10px;padding:6px 10px;cursor:pointer}.cart-summary[_ngcontent-%COMP%]{margin-top:20px;border-top:1px dashed #e5e7eb;padding-top:12px}.cart-summary[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 0}.cart-summary[_ngcontent-%COMP%]   .row.total[_ngcontent-%COMP%]{font-size:18px}.actions[_ngcontent-%COMP%]{margin-top:12px;display:flex;justify-content:flex-end;gap:10px}.actions[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{background:transparent;border:1px solid #9ca3af;border-radius:10px;padding:8px 12px;cursor:pointer}.actions[_ngcontent-%COMP%]   .checkout[_ngcontent-%COMP%]{background:#111827;color:#fff;border:0;border-radius:10px;padding:8px 16px;cursor:pointer}"]})};var $=class i{constructor(t,e){this.router=t;this.authenticationService=e}canActivate(t,e){let n=this.authenticationService.currentUserValue;return n&&n.token?!0:this.router.createUrlTree(["/auth/login"],{queryParams:{returnUrl:e.url}})}static \u0275fac=function(e){return new(e||i)(b(R),b(H))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ue=[{path:"",redirectTo:"pages",pathMatch:"full"},{path:"home",component:Q,canActivate:[$]},{path:"cart",component:W,canActivate:[$]}],Y=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=k({type:i});static \u0275inj=P({imports:[V,ee.forChild(Ue),ee]})};var G=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=k({type:i});static \u0275inj=P({imports:[V,U]})};var Me=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=k({type:i});static \u0275inj=P({imports:[V,Y,xe,U,G]})};export{Me as a};
